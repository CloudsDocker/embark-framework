<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Embark - Framework for Ethereum DApps</title>

    <style>
      ul {
        font-weight: 300;
        padding-left: 20px;

      }
      li {
        padding-left: 0px !important;
      }
    </style>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Embark</h1>
          <h2>Framework for Ethereum DApps</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/iurimatias/embark-framework" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">

<h3><a id="what" class="anchor" href="#features" aria-hidden="true"><span class="octicon octicon-link"></span></a>What is embark</h3>


<p>Embark is a framework that allows you to easily develop and deploy DApps.</p>

<p>With Embark you can:</p>

<ul class="list">
<li>Automatically deploy contracts and make them available in your JS code. Embark watches for changes, and if you update a contract, Embark will automatically redeploy the contracts (if needed) and the dapp.</li>
<li>/Users/iurimatias/Projects/embark-framework.</li>
<li>Do Test Driven Development with Contracts using Javascript.</li>
<li>Easily deploy to & use decentralized systems such as IPFS.</li>
<li>Keep track of deployed contracts, deploy only when truly needed.</li>
<li>Quickly create advanced DApps using multiple contracts.</li>
</ul>

<p>See the <a href="https://github.com/iurimatias/embark-framework/wiki">Wiki</a> for more details.</p>

          <h3><a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h3>

          <p>Requirements: geth (1.4.4)</a>, <a href="https://nodejs.org/">node (5.0.0)</a> and npm</p>

<p>For specs: ethersim</p>

<pre><code>$ npm install -g embark-framework grunt-cli</code></pre>

<p>See <a href="https://github.com/iurimatias/embark-framework/wiki/Installation">Complete Installation Instructions.</a></p>

<h3>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage - Demo</h3>

<p>You can easily create a sample working DApp with the following:</p>
<pre><code>$ embark demo
$ cd embark_demo</code></pre>

<p>To run the ethereum node for development purposes simply run:</p>
<pre><code>$ embark blockchain</code></pre>

<p>By default <strong>embark blockchain</strong> will mine a minimum amount of ether and will <strong>only</strong> mine when new transactions come in. This is quite usefull to keep a low CPU. The option can be configured at <em>config/blockchain.yml</em></p>

<p>Then, in another command line:</p>
<pre><code>$ embark run</code></pre>

<p>This will automatically deploy the contracts, update their JS bindings and deploy your DApp to a local server at http://localhost:8000</p>
<p>Note that if you update your code it will automatically be re-deployed, contracts included. There is no need to restart embark, refreshing the page on the browser will do.</p>
<p>note: for a demo using meteor do <em>embark meteor_demo</em> followed by <em>embark deploy</em> then <em>meteor</em></p>

<h3>
<a id="create-dapp" class="anchor" href="#create-dapp" aria-hidden="true"><span class="octicon octicon-link"></span></a>Creating a new DApp</h3>

<pre><code>$ embark new AppName
$ cd AppName</code></pre>

<h3>
<a id="structure" class="anchor" href="#blockchains" aria-hidden="true"><span class="octicon octicon-link"></span></a>DApp Structure</h3>

<pre><code>  app/
    |___ contracts/ #solidity or serpent contracts
    |___ html/
    |___ css/
    |___ js/
  config/
    |___ blockchain.yml #environments configuration
    |___ server.yml     #server configuration
  test/ #contract tests
</code></pre>

<p>Solidity files in the contracts directory will automatically be deployed with <strong>embark run</strong>. Changes in any files will automatically be reflected in app, changes to contracts will result in a redeployment and update of their JS Bindings</p>

<h3>
<a id="contracts" class="anchor" href="#contracts" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using Contracts</h3>

<p>Embark will automatically take care of deployment for you and set all needed JS bindings. For example, the contract below:</p>

<pre><code># app/contracts/simple_storage.sol
contract SimpleStorage {
  uint public storedData;

  function SimpleStorage(uint initialValue) {
    storedData = initialValue;
  }

  function set(uint x) {
    storedData = x;
  }

  function get() constant returns (uint retVal) {
    return storedData;
  }
}
</code></pre>

<p>Will automatically be available in Javascript as:</p>

<pre><code># app/js/index.js
SimpleStorage.set(100);
SimpleStorage.get();
SimpleStorage.storedData();
</code></pre>

<p>You can specify for each contract and environment its gas costs and arguments:</p>

<pre><code># config/contracts.yml
development:
  SimpleStorage:
    gas_limit: 500000
    gas_price: 10000000000000
    args:
      - 100
...
</code></pre>

<p>If you are using multiple contracts, you can pass a reference to another contract as <strong>$ContractName</strong>, Embark will automatically replace this with the correct address for the contract.</p>

<pre><code># config/contracts.yml
development:
  SimpleStorage:
    args:
      - 100
      - $MyStorage
  SimpleStorage:
    args:
      - "initial string"
  MyMainContract:
    args:
      - $SimpleStorage
...
</code></pre>


<p>If you are using multiple contracts, you can pass a reference to another contract as $ContractName, Embark will automatically replace this with the correct address for the contract.</p>

<pre><code># config/contracts.yml
development:
  SimpleStorage:
    args:
      - 100
      - $MyStorage
  MyStorage:
      args:
        - "initial string"
  MyMainContract:
    args:
      - $SimpleStorage
...
</code></pre>

<p>You can now deploy many instances of the same contract. e.g</p>

<pre><code># config/contracts.yml
development:
  Currency:
    deploy: false
    args:
      - 100
  Usd:
    instanceOf: Currency
    args:
      - "initial string"
  MyCoin:
    instanceOf: Currency
    args:
      - $SimpleStorage
...
</code></pre>

<p>Contracts addresses can be defined, If an address is defined the contract wouldn't be deployed but its defined address will be used instead.</p>

<pre><code># config/contracts.yml
development:
    UserStorage:
      address: 0x123456
    UserManagement:
       args:
         - $UserStorage
  ...
</code></pre>

<p>You can also define contract interfaces (Stubs) and actions to do on deployment</p>

<pre><code># config/contracts.yml
development:
  DataSource:
    args:
  MyDataSource:
    args:
    instanceOf: DataSource
  Manager:
    stubs:
      - DataSource
    args:
      - $MyDataSource
    onDeploy:
      - Manager.updateStorage($MyDataSource)
      - MyDataSource.set(5)
...
</code></pre>

<h3>
<a id="tests" class="anchor" href="#tests" aria-hidden="true"><span class="octicon octicon-link"></span></a>Tests</h3>

<p>You can run specs with embark spec, it will run any files ending *_spec.js under spec/.</p>

<p>Embark includes a testing lib to fastly run & test your contracts in a EVM.</p>

<pre><code># test/simple_storage_spec.js
var assert = require('assert');
var Embark = require('embark-framework');
var EmbarkSpec = Embark.initTests();
var web3 = EmbarkSpec.web3;

describe("SimpleStorage", function() {
  before(function(done) {
    EmbarkSpec.sim.createAccounts(10, function() {
      EmbarkSpec.sim.setBalance(web3.eth.accounts[0], 1000000000000000000000, function() {
        EmbarkSpec.deployAll(done);
      });
    });
  });

  it("should set constructor value", function(done) {
    SimpleStorage.storedData(function(err, result) {
      assert.equal(result.toNumber(), 100);
      done();
    });
  });

  it("set storage value", function(done) {
    SimpleStorage.set(150, function() {
      SimpleStorage.get(function(err, result) {
        assert.equal(result.toNumber(), 150);
        done();
      });
    });
  });

})
</code></pre>

<h3>
<a id="blockchains" class="anchor" href="#blockchains" aria-hidden="true"><span class="octicon octicon-link"></span></a>Working with different chains</h3>

<p>You can specify which environment to deploy to</p>

<pre><code>$ embark blockchain staging
$ embark run staging</code></pre>

<p>The environment is a specific blockchain configuration that can be managed at <strong>config/blockchain.yml</strong></p>

<pre><code># config/blockchain.yml
  ...
  staging:
    rpc_host: localhost
    rpc_port: 8101
    rpc_whitelist: "*"
    datadir: default
    network_id: 0
    console: true
    account:
      init: false
      address: 0x123
</code></pre>

<p>See <a href="https://github.com/iurimatias/embark-framework/wiki/Configuration">Configuration</a>.</p>

<h3>
<a id="deploy" class="anchor" href="#deploy" aria-hidden="true"><span class="octicon octicon-link"></span></a>Deploying only contracts</h3>

<p>Although <strong>embark run</strong> will automatically deploy contracts, you can choose to only deploy the contracts to a specific environment</p>

<pre><code>$ embark deploy privatenet</code></pre>

<p><strong>embark deploy</strong> will deploy all contracts at <em>app/contracts</em> and return the resulting addresses</p>

<h3>
<a id="structure" class="anchor" href="#structure" aria-hidden="true"><span class="octicon octicon-link"></span></a>Structuring Application</h3>

<p>Embark is quite flexible and you can configure you're own directory structure using embark.yml</p>

<pre><code># embark.yml
  type: "manual" #other options: meteor, grunt
  contracts: ["app/contracts/**/*.sol", "app/contracts/**/*.se"] # contracts files
  output: "src/embark.js" # resulting javascript interface
  blockchainConfig: "config/blockchain.yml" # blockchain config
  contractsConfig: "config/contracts.yml" # contracts config
</code></pre>

<h3>
<a id="ipfs" class="anchor" href="#ipfs" aria-hidden="true"><span class="octicon octicon-link"></span></a>Deploying to IPFS</h3>

<p>To deploy a dapp to IPFS, all you need to do is run a local IPFS node and then run embark ipfs. If you want to deploy to the live net then after configuring you account on config/blockchain.yml on the production environment then you can deploy to that chain by specifying the environment embark ipfs production.</p>

<h3>
<a id="plugin" class="anchor" href="#plugin" aria-hidden="true"><span class="octicon octicon-link"></span></a>LiveReload Plugin</h3>
<p>Embark works quite well with the <a href="https://chrome.google.com/webstore/detail/livereload/jnihajbhpnppcggbcgedagnkighmdlei">LiveReload Plugin</a></p>

        <footer>
          embark-framework is maintained by <a href="https://github.com/iurimatias">iurimatias</a><br>
          This page was generated by <a href="https://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>
        
      </div>
    </div>
  </body>
</html>
